import{$ as Xe,A as x,B as L,C as ue,D as d,E as V,F as h,G as C,H as a,Ha as fe,I as je,Ia as Be,J as ke,Ka as B,L as $,La as pe,M as Ue,O as Ge,P as Le,Sa as He,V as Ve,W as X,X as le,Z as _,_ as $e,a as l,b as Ne,c as m,d as re,da as de,f as oe,g as j,h as A,i as xe,j as k,k as se,l as S,m as U,n as ie,o as I,p as T,q as ae,r as E,s as N,t as ce,u as G,v as Ce,w as Re,wb as Ze,x as Fe,y as b,z as Pe}from"./chunk-NHHM44B2.js";function he(e,r){let t=!r?.manualCleanup;t&&!r?.injector&&Le(he);let n=t?r?.injector?.get(le)??a(le):null,o=Et(r?.equal),s;r?.requireSync?s=de({kind:0},{equal:o}):s=de({kind:1,value:r?.initialValue},{equal:o});let i=e.subscribe({next:c=>s.set({kind:1,value:c}),error:c=>{if(r?.rejectErrors)throw c;s.set({kind:2,error:c})}});if(r?.requireSync&&s().kind===0)throw new ue(601,!1);return n?.onDestroy(i.unsubscribe.bind(i)),B(()=>{let c=s();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:throw new ue(601,!1)}},{equal:r?.equal})}function Et(e=Object.is){return(r,t)=>r.kind===1&&t.kind===1&&e(r.value,t.value)}var M="NGXS_META",ve="NGXS_OPTIONS_META",ge="NGXS_SELECTOR_META";function me(e){if(!e.hasOwnProperty(M)){let r={name:null,actions:{},defaults:{},path:null,makeRootSelector(t){return t.getStateGetter(r.name)},children:[]};Object.defineProperty(e,M,{value:r})}return R(e)}function R(e){return e[M]}function Me(e){return e.hasOwnProperty(ge)||Object.defineProperty(e,ge,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),Oe(e)}function Oe(e){return e[ge]}function _t(e,r,t){if(r===null||t===null||r.length!==t.length)return!1;let n=r.length;for(let o=0;o<n;o++)if(!e(r[o],t[o]))return!1;return!0}function Z(e,r=Object.is){let t=null,n=null;function o(){return _t(r,t,arguments)||(n=e.apply(null,arguments)),t=arguments,n}return o.reset=function(){t=null,n=null},o}var Se=class{constructor(r){this._name=r;let t=Me(this);t.makeRootSelector=n=>n.getStateGetter(this._name)}getName(){return this._name}toString(){return`StateToken[${this._name}]`}},It=(()=>{class e{static{this._value={}}static set(t){this._value=t}static pop(){let t=this._value;return this._value={},t}}return e})(),Ee=new h("",{providedIn:"root",factory:()=>It.pop()}),_e=(()=>{class e extends k{constructor(){super(1)}bootstrap(){this.next(!0),this.complete()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ye(e){let r=[],t=!1;return function(...o){if(t){r.unshift(o);return}for(t=!0,e(...o);r.length>0;){let s=r.pop();s&&e(...s)}t=!1}}var H=class extends A{constructor(){super(...arguments),this._orderedNext=Ye(r=>super.next(r))}next(r){this._orderedNext(r)}},ye=class extends xe{constructor(r){super(r),this._orderedNext=Ye(t=>super.next(t)),this._currentValue=r}getValue(){return this._currentValue}next(r){this._currentValue=r,this._orderedNext(r)}};function Ie(e){return r=>new j(t=>r.subscribe({next(n){e(()=>t.next(n))},error(n){e(()=>t.error(n))},complete(){e(()=>t.complete())}}))}var z=(()=>{class e extends ye{constructor(){super({}),this.state=he(this.pipe(Ie(pe)),{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.complete()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var qe=(()=>{class e{static{this.type="@@INIT"}}return e})(),Ke=(()=>{class e{static{this.type="@@UPDATE_STATE"}constructor(t){this.addedStates=t}}return e})(),Y=new h("");function We(e){return!!e.prototype.handle}function D(e){return e.constructor?.type||e.type}function In(e){let r=D(e);return function(t){return r===D(t)}}var Te=(e,r,t)=>{e=l({},e);let n=r.split("."),o=n.length-1;return n.reduce((s,i,c)=>(c===o?s[i]=t:s[i]=Array.isArray(s[i])?s[i].slice():l({},s[i]),s&&s[i]),e),e},q=(e,r)=>r.split(".").reduce((t,n)=>t&&t[n],e);function Je(e){return typeof e=="function"}var Tt=(()=>{class e{enter(t){return t()}leave(t){return t()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ot=(()=>{class e{constructor(){this._ngZone=a(_),this._isServer=He(a(Xe))}enter(t){return this._isServer?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return _.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return _.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var st=new h(""),bt=new h("",{providedIn:"root",factory:()=>{let e=a(_),r=a(ke),t=r.get(st),n=e instanceof _;return t?r.get(t):r.get(n?ot:Tt)}}),it=(()=>{class e{constructor(){this._executionStrategy=a(bt)}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function K(e){return Ie(r=>e.leave(r))}var at=(()=>{class e extends H{constructor(){super(),this.dispatched$=new A,this.pipe(E(t=>t.status==="DISPATCHED")).subscribe(t=>{this.dispatched$.next(t)})}ngOnDestroy(){this.complete()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var De=(()=>{class e{constructor(){this.plugins=[],this._parentManager=a(e,{optional:!0,skipSelf:!0}),this._pluginHandlers=a(Y,{optional:!0}),this.registerHandlers()}get _rootPlugins(){return this._parentManager?.plugins||this.plugins}registerHandlers(){let t=this.getPluginHandlers();this._rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(n=>n.handle?n.handle.bind(n):n)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),we=new WeakMap,Qe=!1;function Dt(){if(Qe)return;let e=oe.onUnhandledError;oe.onUnhandledError=function(r){let t=we.get(r);if(t)t();else if(e)e.call(this,r);else throw r},Qe=!0}function wt(e){let r=we.get(e);return r?(r(),!0):!1}function At(e,r){if(e!==null&&typeof e=="object"){let t=!1;we.set(e,()=>{t||(t=!0,r())})}return e}function Nt(e){return r=>{let t=r.subscribe({error:n=>{e.runOutsideAngular(()=>{queueMicrotask(()=>{t&&wt(n)})})}});return new j(n=>(t?.unsubscribe(),t=null,r.subscribe(n)))}}var ct=(()=>{class e extends A{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Ve(e)))(o||e)}})()}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),xt=(()=>{class e{constructor(){this._ngZone=a(_),this._actions=a(at),this._actionResults=a(ct),this._pluginManager=a(De),this._stateStream=a(z),this._ngxsExecutionStrategy=a(it),this._injector=a(X)}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(Nt(this._ngZone),K(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?t.length===0?S(void 0):ae(t.map(n=>this.dispatchSingle(n))).pipe(I(()=>{})):this.dispatchSingle(t)}dispatchSingle(t){let n=this._stateStream.getValue(),o=this._pluginManager.plugins;return ut(this._injector,[...o,(s,i)=>{s!==n&&this._stateStream.next(s);let c=this.getActionResultStream(i);return c.subscribe(u=>this._actions.next(u)),this._actions.next({action:i,status:"DISPATCHED"}),this.createDispatchObservable(c)}])(n,t).pipe(b())}getActionResultStream(t){return this._actionResults.pipe(E(n=>n.action===t&&n.status!=="DISPATCHED"),G(1),b())}createDispatchObservable(t){return t.pipe(T(n=>{switch(n.status){case"SUCCESSFUL":return S(this._stateStream.getValue());case"ERRORED":return U(()=>n.error);default:return S()}}),b())}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ut=(e,r)=>(...t)=>{let n=r.shift();return Ge(e,()=>n(...t,(...o)=>ut(e,r)(...o)))},lt=new h(""),dt=new h(""),ft=new h(""),F=(()=>{class e{constructor(){this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=ot,this.selectorOptions={injectContainerState:!1,suppressErrors:!1}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:()=>(()=>{let t=new e,n=a(ft);return Ne(l(l({},t),n),{selectorOptions:l(l({},t.selectorOptions),n.selectorOptions)})})(),providedIn:"root"})}}return e})(),be=class{constructor(r,t,n){this.previousValue=r,this.currentValue=t,this.firstChange=n}};var P=(()=>{class e{constructor(){this._stateStream=a(z),this._dispatcher=a(xt),this._config=a(F)}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:n=>this._stateStream.next(n),dispatch:n=>this._dispatcher.dispatch(n)}}setStateToTheCurrentWithNew(t){let n=this.getRootStateOperations(),o=n.getState();n.setState(l(l({},o),t.defaults))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ct(e,r,t){return n=>{let{argumentSelectorFunctions:o,selectorOptions:s}=Ft(n,e,r),{suppressErrors:i}=s;return function(u){let y=o.map(v=>v(u));try{return t(...y)}catch(v){if(i&&v instanceof TypeError)return;throw v}}}}function Rt(e,r){let t=r&&r.containerClass,o=Z(function(){let i=e.apply(t,arguments);return typeof i=="function"?Z.apply(null,[i]):i});return Object.setPrototypeOf(o,e),o}function Ft(e,r,t=[]){let n=r.getSelectorOptions(),o=e.getSelectorOptions(n),i=Pt(t,o,r.containerClass).map(c=>pt(c)(e));return{selectorOptions:o,argumentSelectorFunctions:i}}function Pt(e=[],r,t){let n=[],o=r.injectContainerState||e.length===0;return t&&o&&R(t)&&n.push(t),n.push(...e),n}function pt(e){let r=Oe(e)||R(e);return r&&r.makeRootSelector||(()=>e)}function jt(e){return r=>{for(let t=0;t<e.length;t++){if(!r)return;r=r[e[t]]}return r}}function kt(e){let r=e,t="store."+r[0],n=0,o=r.length,s=t;for(;++n<o;)s=s+" && "+(t=t+"."+r[n]);return new Function("store","return "+s+";")}var Ut=new h("",{providedIn:"root",factory:()=>a(F).compatibility?.strictContentSecurityPolicy?jt:kt});function Gt(e){let r=t=>e.find(o=>o===t)[M].name;return e.reduce((t,n)=>{let{name:o,children:s}=n[M];return t[o]=(s||[]).map(r),t},{})}function Lt(e){return e.reduce((r,t)=>{let n=t[M];return r[n.name]=t,r},{})}function Vt(e,r={}){let t=(n,o)=>{for(let s in n)if(n.hasOwnProperty(s)&&n[s].indexOf(o)>=0){let i=t(n,s);return i!==null?`${i}.${s}`:s}return null};for(let n in e)if(e.hasOwnProperty(n)){let o=t(e,n);r[n]=o?`${o}.${n}`:n}return r}function $t(e){let r=[],t={},n=(o,s=[])=>{Array.isArray(s)||(s=[]),s.push(o),t[o]=!0,e[o].forEach(i=>{t[i]||n(i,s.slice(0))}),r.indexOf(o)<0&&r.push(o)};return Object.keys(e).forEach(o=>n(o)),r.reverse()}var Xt=(()=>{class e{constructor(){this._actionTypeToHandlersMap=new Map}ngOnDestroy(){this._actionTypeToHandlersMap.clear()}get(t){return this._actionTypeToHandlersMap.get(t)}register(t,n){let o=this._actionTypeToHandlersMap.get(t)??new Set;return o.add(n),this._actionTypeToHandlersMap.set(t,o),()=>{this._actionTypeToHandlersMap.get(t).delete(n)}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Vn=new RegExp("^[a-zA-Z0-9_]+$");var Bt=(()=>{class e{constructor(){this._ngZone=a(_),this._errorHandler=a($e)}handleError(t,n){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(t))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ht(e){return r=>{let t=l({},r);for(let n in e)t[n]=e[n];return t}}var ht=(()=>{class e{constructor(){this._internalStateOperations=a(P)}createStateContext(t){let n=this._internalStateOperations.getRootStateOperations();return{getState(){let o=n.getState();return St(o,t)},patchState(o){let s=n.getState(),i=Ht(o);et(n,s,i,t)},setState(o){let s=n.getState();Je(o)?et(n,s,o,t):gt(n,s,o,t)},dispatch(o){return n.dispatch(o)}}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function gt(e,r,t,n){let o=Te(r,n,t);return e.setState(o),o}function et(e,r,t,n){let o=St(r,n),s=t(o);return gt(e,r,s,n)}function St(e,r){return q(e,r)}function Zt(...e){return zt(e,["DISPATCHED"])}function zt(e,r,t=qt){let n=Kt(e),o=r&&Wt(r);return function(s){return s.pipe(Yt(n,o),t())}}function Yt(e,r){return E(t=>{let n=D(t.action),o=e[n],s=r?r[t.status]:!0;return o&&s})}function qt(){return I(e=>e.action)}function Kt(e){return e.reduce((r,t)=>(r[D(t)]=!0,r),{})}function Wt(e){return e.reduce((r,t)=>(r[t]=!0,r),{})}function Jt(e){let r=e===void 0?{}:e;return e&&(Array.isArray(e)?r=e.slice():typeof e=="object"&&(r=l({},e))),r}var Ae=(()=>{class e{constructor(){this._injector=a(X),this._config=a(F),this._stateContextFactory=a(ht),this._actions=a(at),this._actionResults=a(ct),this._initialState=a(Ee,{optional:!0}),this._actionRegistry=a(Xt),this._propGetter=a(Ut),this._actionsSubscription=null,this._ngxsUnhandledErrorHandler=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=Z(()=>{let t=this,n=t._propGetter;function o(i){let c=t._statePaths[i];return c?n(c.split(".")):null}return{getStateGetter(i){let c=o(i);return c||((...u)=>(c||(c=o(i)),c?c(...u):void 0))},getSelectorOptions(i){let c=t._config.selectorOptions;return l(l({},c),i||{})}}})}ngOnDestroy(){this._actionsSubscription?.unsubscribe()}add(t){let{newStates:n}=this.addToStatesMap(t);if(!n.length)return[];let o=Gt(n),s=$t(o),i=Vt(o),c=Lt(n),u=[];for(let y of s){let v=c[y],O=i[y],p=v[M];this.addRuntimeInfoToMeta(p,O);let g={name:y,path:O,isInitialised:!1,actions:p.actions,instance:a(v),defaults:Jt(p.defaults)};this.hasBeenMountedAndBootstrapped(y,O)||u.push(g),this._states.push(g),this.hydrateActionMetasMap(g)}return u}addAndReturnDefaults(t){let n=t||[],o=this.add(n);return{defaults:o.reduce((i,c)=>Te(i,c.path,c.defaults),{}),states:o}}connectActionHandlers(){this._actionsSubscription=this._actions.pipe(E(t=>t.status==="DISPATCHED"),T(t=>{let n=t.action;return this.invokeActions(n).pipe(I(()=>({action:n,status:"SUCCESSFUL"})),ce({action:n,status:"CANCELED"}),N(o=>{let s=this._ngxsUnhandledErrorHandler||=this._injector.get(Bt),i=At(o,()=>s.handleError(o,{action:n}));return S({action:n,status:"ERRORED",error:i})}))})).subscribe(t=>this._actionResults.next(t))}invokeActions(t){let n=D(t),o=[],s=!1,i=this._actionRegistry.get(n);if(i)for(let c of i){let u;try{u=c(t)}catch(y){u=U(()=>y)}o.push(u),s=!0}return o.length||o.push(S(void 0)),ae(o)}addToStatesMap(t){let n=[],o=this._statesByName;for(let s of t){let i=R(s).name;!o[i]&&(n.push(s),o[i]=s)}return{newStates:n}}addRuntimeInfoToMeta(t,n){this._statePaths[t.name]=n,t.path=n}hasBeenMountedAndBootstrapped(t,n){let o=q(this._initialState,n)!==void 0;return this._statesByName[t]&&o}hydrateActionMetasMap({path:t,actions:n,instance:o}){let{dispatched$:s}=this._actions;for(let i of Object.keys(n)){let c=n[i].map(u=>{let y=!!u.options.cancelUncompleted;return v=>{let O=this._stateContextFactory.createStateContext(t),p=o[u.fn](O,v);if(fe(p)&&(p=se(p)),ie(p)){if(p=p.pipe(T(g=>fe(g)?se(g):ie(g)?g:S(g)),ce(void 0)),y){let g=s.pipe(Zt(v));p=p.pipe(x(g))}p=p.pipe(Re(()=>{O.setState=tt,O.patchState=tt}))}else p=S(void 0);return p}});for(let u of c)this._actionRegistry.register(i,u)}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function tt(){}var W=(()=>{class e{constructor(){this._stateStream=a(z),this._internalStateOperations=a(P),this._config=a(F),this._internalExecutionStrategy=a(it),this._stateFactory=a(Ae),this._selectableStateStream=this._stateStream.pipe(K(this._internalExecutionStrategy),b({bufferSize:1,refCount:!0})),this.initStateStream()}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){let n=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe(I(n),N(o=>this._config.selectorOptions.suppressErrors&&o instanceof TypeError?S(void 0):U(o)),Ce(),K(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(G(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}selectSignal(t){let n=this.getStoreBoundSelectorFn(t);return B(()=>n(this._stateStream.state()))}subscribe(t){return this._selectableStateStream.pipe(K(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){let n=pt(t),o=this._stateFactory.getRuntimeSelectorContext();return n(o)}initStateStream(){let t=a(Ee),n=this._stateStream.value;(!n||Object.keys(n).length===0)&&this._stateStream.next(t)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Qt=new h("");var en=(()=>{class e{static{this.store=null}static{this.config=null}constructor(t,n){e.store=t,e.config=n}ngOnDestroy(){e.store=null,e.config=null}static{this.\u0275fac=function(n){return new(n||e)(C(W),C(F))}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),yt=(()=>{class e{constructor(){this._store=a(W),this._internalStateOperations=a(P),this._stateContextFactory=a(ht),this._appBootstrappedState=a(_e),this._destroy$=new k(1)}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,n){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(E(()=>!!n),L(()=>this._invokeInitOnStates(n.states)),T(()=>this._appBootstrappedState),E(o=>!!o),x(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(n.states))}_invokeInitOnStates(t){for(let n of t){let o=n.instance;o.ngxsOnChanges&&this._store.select(s=>q(s,n.path)).pipe(Pe(void 0),Fe(),x(this._destroy$)).subscribe(([s,i])=>{let c=new be(s,i,!n.isInitialised);o.ngxsOnChanges(c)}),o.ngxsOnInit&&o.ngxsOnInit(this._getStateContext(n)),n.isInitialised=!0}}_invokeBootstrapOnStates(t){for(let n of t){let o=n.instance;o.ngxsAfterBootstrap&&o.ngxsAfterBootstrap(this._getStateContext(n))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t.path)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=d({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function tn(){Dt(),(a(Qt,{optional:!0})||[]).forEach(i=>i());let r=a(Ae),t=a(P);a(W),a(en);let n=a(lt,{optional:!0})||[],o=a(yt),s=r.addAndReturnDefaults(n);t.setStateToTheCurrentWithNew(s),r.connectActionHandlers(),o.ngxsBootstrap(new qe,s)}function nn(){a(W);let e=a(P),r=a(Ae),t=a(dt,{optional:!0})||[],n=a(yt),o=t.reduce((i,c)=>i.concat(c),[]),s=r.addAndReturnDefaults(o);s.states.length&&(e.setStateToTheCurrentWithNew(s),n.ngxsBootstrap(new Ke(s.defaults),s))}var $n=new h(""),Xn=new h("");var rn=(()=>{class e{constructor(){tn()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=$({type:e})}static{this.\u0275inj=V({})}}return e})(),on=(()=>{class e{constructor(){nn()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=$({type:e})}static{this.\u0275inj=V({})}}return e})();function sn(e,r){return[...e,{provide:lt,useValue:e},{provide:Be,useFactory:()=>{let t=a(_e);return()=>t.bootstrap()},multi:!0},{provide:ft,useValue:r},{provide:st,useValue:r.executionStrategy}]}function an(e){return[De,...e,{provide:dt,multi:!0,useValue:e}]}var Bn=(()=>{class e{static forRoot(t=[],n={}){return{ngModule:rn,providers:sn(t,n)}}static forFeature(t=[]){return{ngModule:on,providers:an(t)}}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=$({type:e})}static{this.\u0275inj=V({})}}return e})();function J(e,r){return(t,n,o)=>{let s=me(t.constructor),i=Array.isArray(e)?e:[e];for(let c of i){let u=c.type;s.actions[u]||(s.actions[u]=[]),s.actions[u].push({fn:n,options:r||{},type:u})}}}function vt(e){return r=>{let t=r,n=me(t),o=Object.getPrototypeOf(t),s=cn(o,e);un({meta:n,inheritedStateClass:o,optionsWithInheritance:s}),t[ve]=s}}function cn(e,r){let t=e[ve]||{};return l(l({},t),r)}function un(e){let{meta:r,inheritedStateClass:t,optionsWithInheritance:n}=e,{children:o,defaults:s,name:i}=n,c=typeof i=="string"?i:i&&i.getName()||null;if(t.hasOwnProperty(M)){let u=t[M]||{};r.actions=l(l({},r.actions),u.actions)}r.children=o,r.defaults=s,r.name=c}var nt="NGXS_SELECTOR_OPTIONS_META",rt={getOptions:e=>e&&e[nt]||{},defineOptions:(e,r)=>{e&&(e[nt]=r)}};function ln(e,r){let t=Me(e);t.originalFn=e;let n=()=>({});r&&(t.containerClass=r.containerClass,t.selectorName=r.selectorName||null,n=r.getSelectorOptions||n);let o=l({},t);return t.getSelectorOptions=()=>dn(o,n()),t}function dn(e,r){return l(l(l(l({},rt.getOptions(e.containerClass)||{}),rt.getOptions(e.originalFn)||{}),e.getSelectorOptions()||{}),r)}function fn(e,r,t){let n=Rt(r,t),o=ln(r,t);return o.makeRootSelector=Ct(o,e,n),n}function w(e){return(r,t,n)=>{n||=Object.getOwnPropertyDescriptor(r,t);let o=n?.value,s=fn(e,o,{containerClass:r,selectorName:t.toString(),getSelectorOptions(){return{}}});return{configurable:!0,get(){return s},originalFn:o}}}function Hn(e){return Ue([We(e)?{provide:Y,useClass:e,multi:!0}:{provide:Y,useValue:e,multi:!0},{provide:je,useValue:()=>a(De),multi:!0}])}var Q=class{constructor(r){this.payload=r}static type="[Auth] Login"};var ee=class{static type="[Auth] Logout"},te=class{static type="[Auth] Load From Storage"};var mt=class{constructor(r){this.payload=r}static type="[Favorite] Add Favorite"},Mt=class{constructor(r){this.payload=r}static type="[Favorite] Remove Favorite"},ne=class{static type="[Favorite] Clear Favorites"},Ot=class{static type="[Favorite] Load From Storage"};var f=class{constructor(r){this.utilisateurService=r}static isConnected(r){return r.isConnected}static currentUser(r){return r.user}static token(r){return r.token}static isLoading(r){return r.isLoading}static error(r){return r.error}login({patchState:r},{payload:t}){return r({isLoading:!0,error:null}),this.utilisateurService.login(t.email,t.password).pipe(L(n=>{let o=`token_${n.id}_${Date.now()}`;r({isConnected:!0,user:n,token:o,isLoading:!1,error:null}),localStorage.setItem("auth_user",JSON.stringify(n)),localStorage.setItem("auth_token",o)}),N(n=>(r({isConnected:!1,user:null,token:null,isLoading:!1,error:n.message||"Erreur de connexion"}),S(null))))}logout(r){r.dispatch(new ne),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token"),r.patchState({isConnected:!1,user:null,token:null,error:null,isLoading:!1})}loadAuth({patchState:r}){let t=localStorage.getItem("auth_token"),n=localStorage.getItem("auth_user");if(t&&n)try{let o=JSON.parse(n);r({isConnected:!0,user:o,token:t,isLoading:!1,error:null})}catch{localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token")}}};re(f,"\u0275fac",function(t){return new(t||f)(C(Ze))}),re(f,"\u0275prov",d({token:f,factory:f.\u0275fac})),m([J(Q)],f.prototype,"login",1),m([J(ee)],f.prototype,"logout",1),m([J(te)],f.prototype,"loadAuth",1),m([w()],f,"isConnected",1),m([w()],f,"currentUser",1),m([w()],f,"token",1),m([w()],f,"isLoading",1),m([w()],f,"error",1),f=m([vt({name:"auth",defaults:{isConnected:!1,user:null,token:null,error:null,isLoading:!1}})],f);export{he as a,ve as b,Se as c,qe as d,Ke as e,In as f,Te as g,q as h,W as i,Bn as j,J as k,vt as l,w as m,Hn as n,Q as o,ee as p,te as q,mt as r,Mt as s,ne as t,Ot as u,f as v};
