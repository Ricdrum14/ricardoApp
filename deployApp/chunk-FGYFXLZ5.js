import{a as u,i as B,o as U,u as j,v as g}from"./chunk-MGOYXZT6.js";import{Aa as M,Ba as b,H as m,K as v,Oa as E,Ra as I,T as S,U as y,Wa as k,Ya as F,Za as N,ab as V,ba as r,cb as O,ea as p,eb as T,fa as l,fb as q,gb as z,ha as e,hb as D,ia as t,ib as R,ja as C,na as L,oa as _,pb as W,rb as A,ta as n,tb as P,va as c,xa as f,ya as h,za as x}from"./chunk-NHHM44B2.js";var G=()=>({standalone:!0});function K(o,d){if(o&1&&(e(0,"div",18),n(1),t()),o&2){let s=_();r(),c(" \u274C ",s.error()," ")}}function J(o,d){o&1&&(e(0,"p",19),n(1," L\u2019adresse email est requise "),t())}function Q(o,d){o&1&&(e(0,"p",20),n(1," Le mot de passe doit contenir au moins 6 caract\xE8res "),t())}var H=class o{email="";password="";formSubmitted=!1;store=m(B);router=m(F);route=m(k);redirectUrl=null;isLoading=u(this.store.select(g.isLoading),{initialValue:!1});error=u(this.store.select(g.error),{initialValue:null});isConnected=u(this.store.select(g.isConnected),{initialValue:!1});ngOnInit(){this.redirectUrl=this.route.snapshot.queryParamMap.get("redirect"),this.isConnected()&&this.router.navigate([this.redirectUrl||"/"])}onLogin(){if(this.formSubmitted=!0,!this.email||!this.password){alert("Veuillez remplir tous les champs.");return}if(this.password.length<6){alert("Le mot de passe doit contenir au moins 6 caract\xE8res.");return}this.store.dispatch(new U({email:this.email,password:this.password})).subscribe(()=>{this.isConnected()&&(console.log("Connexion OK \u2714"),this.store.dispatch(new j),this.router.navigate([this.redirectUrl||"/"]))})}static \u0275fac=function(s){return new(s||o)};static \u0275cmp=v({type:o,selectors:[["app-login"]],standalone:!0,features:[M],decls:28,vars:11,consts:[[1,"min-h-screen","flex","flex-col","items-center","justify-center","bg-gradient-to-br","from-blue-600","via-indigo-600","to-purple-700","p-6"],["routerLink","/",1,"flex","items-center","gap-2","mb-6","text-indigo-100","hover:text-white","font-medium","bg-white/10","hover:bg-white/20","px-4","py-2","rounded-full","border","border-white/30","backdrop-blur-md","shadow","transition-all","duration-300"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2","stroke","currentColor",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","d","M15 19l-7-7 7-7"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-md","p-8","space-y-6"],["id","login-title",1,"text-2xl","font-bold","text-center","text-indigo-700"],[1,"text-center","text-gray-500","text-sm"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",4,"ngIf"],[1,"space-y-4",3,"ngSubmit"],["for","email",1,"block","text-gray-700","font-medium","mb-1"],["id","email","name","email","type","email","required","","placeholder","Entrez votre adresse email","title","Entrez votre adresse email","aria-required","true",1,"w-full","px-4","py-2","border","rounded-lg","outline-none","focus:ring-2","focus:ring-indigo-400",3,"ngModelChange","ngModel","ngModelOptions"],["class","text-red-500 text-sm","id","email-error",4,"ngIf"],["for","password",1,"block","text-gray-700","font-medium","mb-1"],["id","password","name","password","type","password","required","","minlength","6","placeholder","Entrez votre mot de passe","title","Entrez votre mot de passe","aria-required","true",1,"w-full","px-4","py-2","border","rounded-lg","outline-none","focus:ring-2","focus:ring-indigo-400",3,"ngModelChange","ngModel","ngModelOptions"],["class","text-red-500 text-sm","id","password-error",4,"ngIf"],["type","submit","aria-label","Bouton de connexion",1,"w-full","bg-indigo-600","hover:bg-indigo-700","text-white","py-2","rounded-lg","font-semibold","transition",3,"disabled"],[1,"text-center","text-sm","text-gray-600","mt-4"],["routerLink","/signup","aria-label","Aller \xE0 la page d\u2019inscription",1,"text-indigo-600","font-semibold","hover:underline"],[1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded"],["id","email-error",1,"text-red-500","text-sm"],["id","password-error",1,"text-red-500","text-sm"]],template:function(s,i){s&1&&(e(0,"div",0)(1,"button",1),S(),e(2,"svg",2),C(3,"path",3),t(),n(4," Retour \xE0 l\u2019accueil "),t(),y(),e(5,"div",4)(6,"h2",5),n(7," Connexion "),t(),e(8,"p",6),n(9,"Heureux de vous revoir \u{1F33F}"),t(),p(10,K,2,1,"div",7),e(11,"form",8),L("ngSubmit",function(){return i.onLogin()}),e(12,"div")(13,"label",9),n(14," Adresse email "),t(),e(15,"input",10),x("ngModelChange",function(a){return h(i.email,a)||(i.email=a),a}),t(),p(16,J,2,0,"p",11),t(),e(17,"div")(18,"label",12),n(19," Mot de passe "),t(),e(20,"input",13),x("ngModelChange",function(a){return h(i.password,a)||(i.password=a),a}),t(),p(21,Q,2,0,"p",14),t(),e(22,"button",15),n(23),t()(),e(24,"p",16),n(25," Pas encore inscrit ? "),e(26,"a",17),n(27," Inscrivez-vous ! "),t()()()()),s&2&&(r(10),l("ngIf",i.error()),r(5),f("ngModel",i.email),l("ngModelOptions",b(9,G)),r(),l("ngIf",i.formSubmitted&&!i.email),r(4),f("ngModel",i.password),l("ngModelOptions",b(10,G)),r(),l("ngIf",i.formSubmitted&&i.password.length<6),r(),l("disabled",i.isLoading()),r(),c(" ",i.isLoading()?"Connexion...":"Se connecter"," "))},dependencies:[I,E,P,R,O,T,q,W,A,D,z,V,N]})};export{H as LoginComponent};
